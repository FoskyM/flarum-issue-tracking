{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@foskym/flarum-issue-tracking/webpack/bootstrap","webpack://@foskym/flarum-issue-tracking/webpack/runtime/compat get default export","webpack://@foskym/flarum-issue-tracking/webpack/runtime/define property getters","webpack://@foskym/flarum-issue-tracking/webpack/runtime/hasOwnProperty shorthand","webpack://@foskym/flarum-issue-tracking/webpack/runtime/make namespace object","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/extenders']\"","webpack://@foskym/flarum-issue-tracking/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@foskym/flarum-issue-tracking/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/Model']\"","webpack://@foskym/flarum-issue-tracking/./src/common/models/Issue.js","webpack://@foskym/flarum-issue-tracking/./src/common/models/DiscussionIssue.js","webpack://@foskym/flarum-issue-tracking/./src/common/extend.js","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['forum/app']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/extend']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/app']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/components/Page']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/utils/humanTime']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/Component']\"","webpack://@foskym/flarum-issue-tracking/./src/common/components/ProgressBar.tsx","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/components/Button']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/components/Link']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/utils/abbreviateNumber']\"","webpack://@foskym/flarum-issue-tracking/./src/common/components/Label.tsx","webpack://@foskym/flarum-issue-tracking/./src/common/components/LabelGroup.tsx","webpack://@foskym/flarum-issue-tracking/./src/forum/components/IssueListItem.tsx","webpack://@foskym/flarum-issue-tracking/./src/forum/components/IssueList.tsx","webpack://@foskym/flarum-issue-tracking/./src/forum/components/IssueHero.tsx","webpack://@foskym/flarum-issue-tracking/./src/forum/components/IssuePage.tsx","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/components/ComposerBody']\"","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@foskym/flarum-issue-tracking/./src/forum/components/IssueComposer.js","webpack://@foskym/flarum-issue-tracking/external root \"flarum.core.compat['forum/components/DiscussionHero']\"","webpack://@foskym/flarum-issue-tracking/./src/forum/index.tsx","webpack://@foskym/flarum-issue-tracking/./src/forum/addLabels.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class Issue extends Model {\n  id = Model.attribute('id');\n  slug = Model.attribute('slug');\n  title = Model.attribute('title');\n  description = Model.attribute('description');\n  author = Model.attribute('author');\n  state = Model.attribute('state');\n  priority = Model.attribute('priority');\n  type = Model.attribute('type');\n  created_at = Model.attribute('created_at', Model.transformDate);\n  updated_at = Model.attribute('updated_at', Model.transformDate);\n  resolved_at = Model.attribute('resolved_at', Model.transformDate);\n  is_resolved = Model.attribute('is_resolved');\n  progress = Model.attribute('progress');\n  discussion = Model.hasOne('discussion');\n  discussion_id = Model.attribute('discussion_id');\n}\n","import Model from 'flarum/common/Model';\n\nexport default class DiscussionIssue extends Model {\n  id = Model.attribute('id');\n  discussion_id = Model.attribute('discussion_id');\n  issue_id = Model.attribute('issue_id');\n}\n","import Extend from 'flarum/common/extenders';\nimport Issue from \"./models/Issue\";\nimport DiscussionIssue from './models/DiscussionIssue';\n\nexport default [\n  new Extend.Store()\n    .add('issue-tracking-issues', Issue)\n    .add('issue-tracking-discussion-issue', DiscussionIssue),\n];\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from 'flarum/common/Component';\r\n\r\nexport default class ProgressBar extends Component {\r\n  view() {\r\n    let className = ['IssueTracking-ProgressBar'];\r\n\r\n    if (this.attrs.className) className.push(this.attrs.className);\r\n\r\n    if (this.attrs.mini) className.push('IssueTracking-ProgressBar--mini');\r\n\r\n    if (this.attrs.fancy) className.push('IssueTracking-ProgressBar--fancy');\r\n\r\n    if (this.attrs.alternate) className.push('IssueTracking-ProgressBar--alternate');\r\n\r\n    return (\r\n      <div className={className.join(' ')}>\r\n        <div className=\"IssueTracking-ProgressBar-bar\" style={{ width: `${this.getProgress()}%` }} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getProgress() {\r\n    return this.attrs.progress;\r\n  }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/abbreviateNumber'];","import Component from 'flarum/common/Component';\r\nimport type Mithril from 'mithril';\r\n\r\nexport default class Label extends Component {\r\n  view(vnode: Mithril.Vnode) {\r\n    let style = {};\r\n    let className = ['IssueTracking-Label'];\r\n\r\n    if (this.attrs.className) className.push(this.attrs.className);\r\n\r\n    style.color = this.attrs.foreground || '#fff';\r\n\r\n    if (this.attrs.background) {\r\n      style.backgroundColor = `${this.attrs.background}`;\r\n      className.push('colored');\r\n    }\r\n\r\n    return (\r\n      <span className={className.join(' ')} style={style}>\r\n        <span className=\"IssueTracking-Label-text\">{vnode.children}</span>\r\n      </span>\r\n    );\r\n  }\r\n}","import Component from 'flarum/common/Component';\r\nimport type Mithril from 'mithril';\r\n\r\nexport default class LabelGroup extends Component {\r\n  view(vnode: Mithril.Vnode) {\r\n    let className = ['IssueTracking-LabelGroup'];\r\n\r\n    if (this.attrs.className) className.push(this.attrs.className);\r\n\r\n    return <span className={className.join(' ')}>{vnode.children}</span>;\r\n  }\r\n}","import app from 'flarum/common/app';\r\nimport Component from 'flarum/common/Component';\r\nimport humanTime from 'flarum/common/utils/humanTime';\r\nimport listItems from 'flarum/common/helpers/listItems';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport Tooltip from 'flarum/common/components/Tooltip';\r\nimport Link from 'flarum/common/components/Link';\r\nimport TerminalPost from 'flarum/forum/components/TerminalPost';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport avatar from 'flarum/common/helpers/avatar';\r\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\r\nimport Label from '../../common/components/Label';\r\nimport LabelGroup from '../../common/components/LabelGroup';\r\nimport ProgressBar from '../../common/components/ProgressBar';\r\n\r\nimport type Mithril from 'mithril';\r\nexport default class IssueListItem extends Component {\r\n  view() {\r\n    const issue = this.attrs.issue;\r\n    const discussion = issue.discussion();\r\n    const user = discussion.user();\r\n\r\n    return (\r\n      <div className=\"DiscussionListItem\">\r\n        <div className=\"DiscussionListItem-content\">\r\n          <Tooltip\r\n            text={app.translator.trans('core.forum.discussion_list.started_text', { user, ago: humanTime(discussion.createdAt()) })}\r\n            position=\"right\"\r\n          >\r\n            <Link className=\"DiscussionListItem-author\" href={user ? app.route.user(user) : '#'}>\r\n              {avatar(user || null, { title: '' })}\r\n            </Link>\r\n          </Tooltip>\r\n          <ul className=\"DiscussionListItem-badges badges\">{listItems(this.badgeItems(issue).toArray())}</ul>\r\n\r\n          <Link href={app.route.discussion(discussion, this.getJumpTo())} className=\"DiscussionListItem-main\">\r\n            <h2 className=\"DiscussionListItem-title\">{discussion.title()}</h2>\r\n            <ul className=\"DiscussionListItem-info\">{listItems(this.infoItems(issue).toArray())}</ul>\r\n          </Link>\r\n\r\n          <span className=\"DiscussionListItem-count\">\r\n            <span aria-hidden=\"true\">{abbreviateNumber(issue.discussion().replyCount())}</span>\r\n\r\n            <span className=\"visually-hidden\">\r\n              {app.translator.trans('core.forum.discussion_list.total_replies_a11y_label', { count: issue.discussion().replyCount() })}\r\n            </span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getJumpTo() {\r\n    const issue = this.attrs.issue;\r\n    const discussion = issue.discussion();\r\n    const user = discussion.user();\r\n    let jumpTo = 0;\r\n\r\n    jumpTo = Math.min(discussion.lastPostNumber() ?? 0, (discussion.lastReadPostNumber() || 0) + 1);\r\n\r\n    return jumpTo;\r\n  }\r\n\r\n  badgeItems(issue: any) {\r\n    const items = new ItemList();\r\n\r\n    let is_resolved = issue.is_resolved();\r\n    let progress = issue.progress();\r\n    let icon = is_resolved ? 'far fa-check-circle' : progress > 0 ? 'far fa-circle' : 'far fa-stop-circle';\r\n    let color = is_resolved ? '#4CAF50' : progress > 0 ? '#FFC107' : '#F44336';\r\n\r\n    items.add(\r\n      'state',\r\n      <span className={`Badge IssueTracking-Badge`} style={{ backgroundColor: color }}>\r\n        <i className={'icon ' + icon}></i>\r\n      </span>\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  infoItems(issue: any) {\r\n    const items = new ItemList();\r\n\r\n    items.add(\r\n      'terminalPost',\r\n      <div>\r\n        <span>#{issue.id()}</span>\r\n        <span>\r\n          {app.translator.trans('foskym-issue-tracking.forum.issue_opened_by', {\r\n            time: humanTime(issue.created_at()),\r\n            username: issue.discussion().user().displayName(),\r\n          })}\r\n        </span>\r\n        <span>\r\n          {icon('far fa-clock')} {app.translator.trans('foskym-issue-tracking.forum.last_updated', { time: humanTime(issue.updated_at()) })}\r\n        </span>\r\n      </div>\r\n    );\r\n\r\n    if (issue.progress() > 0 && issue.progress() < 1) {\r\n      items.add(\r\n        'progress',\r\n        <span>\r\n          {icon('fas fa-tasks')} {app.translator.trans('foskym-issue-tracking.forum.progress')}\r\n          <ProgressBar progress={issue.progress() * 100} mini={true} />\r\n        </span>\r\n      );\r\n    }\r\n\r\n    items.add(\r\n      'labels',\r\n      <LabelGroup>\r\n        {['state', 'type', 'priority'].map((key) => {\r\n          return (\r\n            <Label background={issue[key]().background} foreground={issue[key]().foreground}>\r\n              {issue[key]().name}\r\n            </Label>\r\n          );\r\n        })}\r\n      </LabelGroup>\r\n    );\r\n\r\n    return items;\r\n  }\r\n}\r\n","import app from 'flarum/common/app';\r\nimport Component from 'flarum/common/Component';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport Button from 'flarum/common/components/Button';\r\nimport listItems from 'flarum/common/helpers/listItems';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport Dropdown from 'flarum/common/components/Dropdown';\r\nimport IssueListItem from './IssueListItem';\r\n\r\nimport type Mithril from 'mithril';\r\n\r\nexport default class IssueList extends Component {\r\n  issues: any[] = [];\r\n  loading = true;\r\n  sorts = ['newest', 'oldest', 'latest'];\r\n  current_sort = 'latest';\r\n\r\n  oninit(vnode: Mithril.Vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.refresh();\r\n  }\r\n\r\n  view() {\r\n    const issuesVnodes: Mithril.Vnode[] = [];\r\n\r\n    this.issues.forEach((issue) => {\r\n      issuesVnodes.push(\r\n        <li>\r\n          <IssueListItem issue={issue} />\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className=\"IssueTracking-issues\">\r\n        <div className=\"IndexPage-toolbar\">\r\n          <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\r\n          <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\r\n        </div>\r\n        {this.loading ? (\r\n          <LoadingIndicator />\r\n        ) : (\r\n          <div className=\"IssueTracking-issuesContainer\">\r\n            <ul className=\"IssueTracking-issuesList\">{issuesVnodes}</ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  refresh() {\r\n    this.loading = true;\r\n    this.issues = [];\r\n    app.store.find('issue-tracking-issues', {\r\n      sort: this.current_sort,\r\n    }).then((issues: any) => {\r\n      this.issues = issues;\r\n      this.loading = false;\r\n      m.redraw();\r\n    });\r\n  }\r\n\r\n  changeState(sort: string) {\r\n    this.current_sort = sort;\r\n    this.refresh();\r\n  }\r\n\r\n  viewItems() {\r\n    const items = new ItemList();\r\n\r\n    items.add(\r\n      'sort',\r\n      <Dropdown buttonClassName=\"Button\" label={app.translator.trans(`foskym-issue-tracking.forum.sort.${this.current_sort}_button`)}>\r\n        {this.sorts.map((sort) => {\r\n          const active = sort === this.current_sort;\r\n\r\n          return (\r\n            <Button icon={active ? 'fas fa-check' : ' '} onclick={this.changeState.bind(this, sort)} active={active}>\r\n              {app.translator.trans(`foskym-issue-tracking.forum.sort.${sort}_button`)}\r\n            </Button>\r\n          );\r\n        })}\r\n      </Dropdown>\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  actionItems() {\r\n    const items = new ItemList();\r\n\r\n    items.add(\r\n      'refresh',\r\n      Button.component({\r\n        title: app.translator.trans('core.forum.index.refresh_tooltip'),\r\n        icon: 'fas fa-sync',\r\n        className: 'Button Button--icon',\r\n        onclick: this.refresh.bind(this),\r\n      })\r\n    );\r\n\r\n    return items;\r\n  }\r\n}","import Component from 'flarum/common/Component';\r\n\r\nexport default class IssueHero extends Component {\r\n  view() {\r\n    const title = this.attrs.title;\r\n    const subtitle = this.attrs.subtitle;\r\n\r\n    delete this.attrs.title;\r\n    delete this.attrs.subtitle;\r\n\r\n    this.attrs.className = 'Hero ' + (this.attrs.className || '');\r\n\r\n    return (\r\n      <header {...this.attrs}>\r\n        <div className=\"container\">\r\n          <div className=\"containerNarrow\">\r\n            <h2 className=\"Hero-title\">{title}</h2>\r\n            <div className=\"Hero-subtitle\">{subtitle}</div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    );\r\n  }\r\n}","import app from 'flarum/common/app';\r\nimport Page from 'flarum/common/components/Page';\r\nimport IndexPage from 'flarum/forum/components/IndexPage';\r\nimport listItems from 'flarum/common/helpers/listItems';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport humanTime from 'flarum/common/utils/humanTime';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport extractText from 'flarum/common/utils/extractText';\r\nimport ProgressBar from '../../common/components/ProgressBar';\r\nimport IssueList from './IssueList';\r\nimport IssueHero from './IssueHero';\r\n\r\nimport type Mithril from 'mithril';\r\n\r\nexport default class IssuePage extends Page {\r\n  loading = true;\r\n  progress = 0;\r\n  details: any = {\r\n    resolved: 0,\r\n    unresolved: 0,\r\n    total: 0,\r\n    updated_at: 0,\r\n  };\r\n  oninit(vnode: Mithril.Vnode) {\r\n    super.oninit(vnode);\r\n\r\n    app.history.push('issues', app.translator.trans('foskym-issue-tracking.forum.header.back_to_issues_tooltip'));\r\n\r\n    app.setTitle(extractText(app.translator.trans('foskym-issue-tracking.forum.title')));\r\n    app.setTitleCount(0);\r\n\r\n    this.load();\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className=\"IndexPage\">\r\n        {this.loading ? (\r\n          <IssueHero title={<LoadingIndicator />} />\r\n        ) : (\r\n          <IssueHero\r\n            title={app.translator.trans('foskym-issue-tracking.forum.title')}\r\n            subtitle={[\r\n              <div className=\"IssueTracking-details\">{listItems(this.issueTrackingDetails().toArray())}</div>,\r\n              <ProgressBar fancy={true} alternate={true} progress={this.progress} />,\r\n            ]}\r\n          />\r\n        )}\r\n        <div className=\"container\">\r\n          <div className=\"sideNavContainer\">\r\n            <nav className=\"IndexPage-nav sideNav\">\r\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\r\n            </nav>\r\n            <div className=\"IndexPage-results sideNavOffset\">{this.loading ? <LoadingIndicator /> : <IssueList />}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  issueTrackingDetails() {\r\n    const items = new ItemList();\r\n\r\n    items.add(\r\n      'updatedAt',\r\n      <div className=\"IssueTracking-detailsItem\">\r\n        <strong>{icon('fas fa-clock')}</strong>{' '}\r\n        {app.translator.trans('foskym-issue-tracking.forum.hero.last_updated', { time: humanTime(this.details.updated_at) })}\r\n      </div>\r\n    );\r\n\r\n    items.add(\r\n      'openIssues',\r\n      <div className=\"IssueTracking-detailsItem\">\r\n        <strong>{this.details.resolved}</strong> {app.translator.trans('foskym-issue-tracking.forum.hero.resolved')}\r\n      </div>\r\n    );\r\n\r\n    items.add(\r\n      'closedIssues',\r\n      <div className=\"IssueTracking-detailsItem\">\r\n        <strong>{this.details.unresolved}</strong> {app.translator.trans('foskym-issue-tracking.forum.hero.unresolved')}\r\n      </div>\r\n    );\r\n\r\n    items.add(\r\n      'progress',\r\n      <div className=\"IssueTracking-detailsItem\">\r\n        <strong>{this.progress}%</strong> {app.translator.trans('foskym-issue-tracking.forum.hero.complete')}\r\n      </div>\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  load() {\r\n    this.loading = false;\r\n\r\n    app.request({\r\n      method: 'GET',\r\n      url: app.forum.attribute('apiUrl') + '/issue-tracking/progress',\r\n    }).then((response: any) => {\r\n      this.details = response;\r\n      this.progress = Math.round((this.details.resolved / (this.details.total)) * 100);\r\n      m.redraw();\r\n    });\r\n  }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/ComposerBody'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import ComposerBody from 'flarum/common/components/ComposerBody';\r\nimport extractText from 'flarum/common/utils/extractText';\r\nimport app from 'flarum/common/app';\r\nimport Stream from 'flarum/common/utils/Stream';\r\n\r\nexport default class IssueComposer extends ComposerBody {\r\n  static initAttrs(attrs) {\r\n    super.initAttrs(attrs);\r\n\r\n    attrs.placeholder = attrs.placeholder || extractText(app.translator.trans('foskym-issue-tracking.forum.composer.body_placeholder'));\r\n    attrs.submitLabel = attrs.submitLabel || app.translator.trans('foskym-issue-tracking.forum.composer.submit_button');\r\n    attrs.confirmExit = attrs.confirmExit || extractText(app.translator.trans('foskym-issue-tracking.forum.composer.discard_confirmation'));\r\n    attrs.titlePlaceholder = attrs.titlePlaceholder || extractText(app.translator.trans('foskym-issue-tracking.forum.composer.title_placeholder'));\r\n    attrs.className = 'ComposerBody--issue';\r\n  }\r\n\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.composer.fields.title = this.composer.fields.title || Stream('');\r\n\r\n    this.title = this.composer.fields.title;\r\n  }\r\n\r\n  headerItems() {\r\n    const items = super.headerItems();\r\n\r\n    // items.add('title', <h3>{app.translator.trans('foskym-issue-tracking.forum.composer.title')}</h3>, 100);\r\n\r\n    items.add(\r\n      'issueTitle',\r\n      <h3>\r\n        <input\r\n          className=\"FormControl\"\r\n          bidi={this.title}\r\n          placeholder={this.attrs.titlePlaceholder}\r\n          disabled={!!this.attrs.disabled}\r\n          onkeydown={this.onkeydown.bind(this)}\r\n        />\r\n      </h3>\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  /**\r\n   * Handle the title input's keydown event. When the return key is pressed,\r\n   * move the focus to the start of the text editor.\r\n   *\r\n   * @param {KeyboardEvent} e\r\n   */\r\n  onkeydown(e) {\r\n    if (e.which === 13) {\r\n      // Return\r\n      e.preventDefault();\r\n      this.composer.editor.moveCursorTo(0);\r\n    }\r\n\r\n    e.redraw = false;\r\n  }\r\n\r\n  hasChanges() {\r\n    return this.title() || this.composer.fields.content();\r\n  }\r\n\r\n  /**\r\n   * Get the data to submit to the server when the issue is saved.\r\n   *\r\n   * @return {Record<string, unknown>}\r\n   */\r\n  data() {\r\n    return {\r\n      title: this.title(),\r\n      content: this.composer.fields.content(),\r\n    };\r\n  }\r\n\r\n  onsubmit() {\r\n    this.loading = true;\r\n\r\n    const data = this.data();\r\n\r\n    app.store\r\n      .createRecord('issue-tracking-issues')\r\n      .save(data)\r\n      .then((issue) => {\r\n        this.composer.hide();\r\n        m.route.set('/d/' + issue.discussion_id());\r\n      }, this.loaded.bind(this));\r\n  }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionHero'];","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport Button from 'flarum/common/components/Button';\n\nimport IssuePage from './components/IssuePage';\nimport IssueComposer from './components/IssueComposer';\n\nimport addLabels from './addLabels';\n\napp.initializers.add('foskym/flarum-issue-tracking', () => {\n  app.routes.issues = {\n    path: '/issues',\n    component: IssuePage,\n  };\n\n  extend(IndexPage.prototype, 'navItems', (navItems) => {\n    navItems.add(\n      'issues',\n      <LinkButton href={app.route('issues')} icon=\"fas fa-bug\">\n        {app.translator.trans('foskym-issue-tracking.forum.title')}\n      </LinkButton>,\n      100\n    );\n\n    return navItems;\n  });\n\n  function newIssueAction(): Promise<unknown> {\n    return new Promise((resolve, reject) => {\n      if (app.session.user) {\n        app.composer.load(IssueComposer, { user: app.session.user });\n        app.composer.show();\n\n        return resolve(app.composer);\n      } else {\n        app.modal.show(LogInModal);\n\n        return reject();\n      }\n    });\n  }\n\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    const route = app.current.data.routeName;\n    if (route !== 'issues') return;\n\n    const canCreateIssue = app.forum.attribute('foskym-issue-tracking.enable_create_issue') || !app.session.user;\n    const cta = items.get('newDiscussion');\n    cta.children = app.translator.trans(canCreateIssue ? 'foskym-issue-tracking.forum.new_issue' : 'foskym-issue-tracking.forum.cannot_create_issue');\n\n    cta.attrs.disabled = !canCreateIssue;\n    cta.attrs.onclick = () => {\n      return newIssueAction().catch(() => {});\n    };\n\n    if (items.has('startDiscussion')) {\n      items.setContent('startDiscussion', cta);\n    }\n  });\n\n  addLabels();\n});\n","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\r\nimport DiscussionHero from 'flarum/forum/components/DiscussionHero';\r\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\r\nimport classList from 'flarum/common/utils/classList';\r\nimport Label from '../common/components/Label';\r\nimport LabelGroup from '../common/components/LabelGroup';\r\n\r\nexport default function () {\r\n  let issue: any;\r\n  let loading = true;\r\n  extend(DiscussionHero.prototype, 'oninit', function () {\r\n    app.store.find('issue-tracking/issue?id=' + this.attrs.discussion.id()).then((data: any) => {\r\n      issue = data;\r\n      loading = false;\r\n      if (issue.id() !== null) {\r\n        m.redraw();\r\n      }\r\n    });\r\n  });\r\n\r\n  extend(DiscussionHero.prototype, 'items', function (items) {\r\n    if (loading) {\r\n      return;\r\n    }\r\n    if (issue.id() === null) {\r\n      return;\r\n    }\r\n    items.add(\r\n      'tags',\r\n      <LabelGroup>\r\n        {['state', 'type', 'priority'].map((key) => {\r\n          return (\r\n            <Label background={issue[key]().background} foreground={issue[key]().foreground}>\r\n              {issue[key]().name}\r\n            </Label>\r\n          );\r\n        })}\r\n      </LabelGroup>\r\n    );\r\n  });\r\n}\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","Issue","_Model","_this","_len","arguments","length","args","Array","_key","apply","concat","id","Model","slug","title","description","author","state","priority","type","created_at","updated_at","resolved_at","is_resolved","progress","discussion","discussion_id","DiscussionIssue","issue_id","Extend","add","ProgressBar","_Component","_proto","view","className","this","attrs","push","mini","fancy","alternate","m","join","style","width","getProgress","Component","Label","vnode","color","foreground","background","backgroundColor","children","LabelGroup","IssueListItem","issue","user","Tooltip","text","app","trans","ago","humanTime","createdAt","position","Link","href","avatar","listItems","badgeItems","toArray","getJumpTo","infoItems","abbreviateNumber","replyCount","count","_discussion$lastPostN","Math","min","lastPostNumber","lastReadPostNumber","items","ItemList","icon","time","username","displayName","map","name","IssueList","issues","loading","sorts","current_sort","oninit","refresh","issuesVnodes","forEach","viewItems","actionItems","LoadingIndicator","_this2","find","sort","then","redraw","changeState","_this3","Dropdown","buttonClassName","label","active","Button","onclick","IssueHero","subtitle","IssuePage","_Page","details","resolved","unresolved","total","extractText","load","issueTrackingDetails","IndexPage","sidebarItems","method","url","attribute","response","round","Page","IssueComposer","_ComposerBody","initAttrs","placeholder","submitLabel","confirmExit","titlePlaceholder","composer","fields","Stream","headerItems","bidi","disabled","onkeydown","which","preventDefault","editor","moveCursorTo","hasChanges","content","data","onsubmit","createRecord","save","hide","route","set","loaded","ComposerBody","path","component","extend","navItems","LinkButton","routeName","canCreateIssue","cta","Promise","resolve","reject","show","LogInModal","has","setContent","DiscussionHero"],"sourceRoot":""}